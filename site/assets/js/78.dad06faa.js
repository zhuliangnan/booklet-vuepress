(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{587:function(t,a,s){"use strict";s.r(a);var n=s(7),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"kafka安装教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka安装教程"}},[t._v("#")]),t._v(" KafKa安装教程")]),t._v(" "),s("h3",{attrs:{id:"安装环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装环境"}},[t._v("#")]),t._v(" 安装环境")]),t._v(" "),s("ul",[s("li",[t._v("linux7")]),t._v(" "),s("li",[t._v("jdk1.8")]),t._v(" "),s("li",[s("img",{attrs:{src:"/upload/2020/01/image-254ce7e3cf0b4e428987344c5b03754f.png",alt:"image.png"}})]),t._v(" "),s("li",[t._v("zookeeper 3.5.9")]),t._v(" "),s("li",[t._v("kafka 2.12-1.0.0")])]),t._v(" "),s("h2",{attrs:{id:"zookeeper的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper的安装"}},[t._v("#")]),t._v(" Zookeeper的安装")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("大家可以使用Kafka自带的zk，也可以自己选择安装自己本地的\n这里我用我自己的zk"),s("br"),t._v("\nZK下载地址:"),s("a",{attrs:{href:"http://mirror.bit.edu.cn/apache/zookeeper/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://mirror.bit.edu.cn/apache/zookeeper/"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("提个醒 3.4以上的版本 要安装带有bin字样的安装包 例如:apache-zookeeper-3.6.1-bin.tar.gz")]),t._v(" "),s("li",[t._v("个人习惯安装在/usr/local下面,自己自行选择,下载安装解压,改名")])])]),t._v(" "),s("h3",{attrs:{id:"zk上传命令解压改名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zk上传命令解压改名"}},[t._v("#")]),t._v(" zk上传命令解压改名")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rz   ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar -zxvf apache-zookeeper-3.5.9-bin.tar.gz ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mv apache-zookeeper-3.5.9-bin zookeeper")]),t._v("\n")])])]),s("h3",{attrs:{id:"编辑配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编辑配置文件"}},[t._v("#")]),t._v(" 编辑配置文件")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("编辑配置文件, 将zoo_sample.cfg这个文件复制为zoo.cfg (必须是这个文件名)")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local/zookeeper/conf")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cp  zoo_sample.cfg  zoo.cfg")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vim zoo.cfg")]),t._v("\n\nzoo.cfg文件修改 或者添加 \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("dataDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/zookeeper/data\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("dataLogDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/zookeeper/log\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\n\n注意：如果想配置集群的话，请在clientPort下面添加服务器的ip。如\n\nserver.1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.128:2888:3888\nserver.2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.129:2888:3888\nserver.3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.130:2888:3888\n")])])]),s("h3",{attrs:{id:"创建文件夹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建文件夹"}},[t._v("#")]),t._v(" 创建文件夹")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("创建我们刚刚指定的data和logs文件夹")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost local"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local/zookeeper/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir data")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir logs")]),t._v("\n")])])]),s("h3",{attrs:{id:"对于集群配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对于集群配置文件"}},[t._v("#")]),t._v(" 对于集群配置文件")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("如果是配置集群，还需要在前面配置过的dataDir路径下新增myid文件")])]),t._v(" "),s("ol",[s("li",[t._v("在data目录下创建文件，文件名为“myid”")]),t._v(" "),s("li",[t._v("编辑该“myid”文件，并在对应的IP的机器上输入对应的编号")]),t._v(" "),s("li",[t._v("如在192.168.248.128上，“myid”文件内容就是1。在192.168.248.129上，内容就是2。")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch myid")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vim myid")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.128的myid内容\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.129的myid内容\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.130的myid内容\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"配置环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[t._v("#")]),t._v(" 配置环境变量")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost zookeeper-3.4.13"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# export ZOOKEEPER_INSTALL=/usr/local/zookeeper/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost zookeeper-3.4.13"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# export PATH=$PATH:$ZOOKEEPER_INSTALL/bin")]),t._v("\n")])])]),s("h3",{attrs:{id:"启动zookeeper"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动zookeeper"}},[t._v("#")]),t._v(" 启动zookeeper")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local/zookeeper/bin/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./zkServer.sh start")]),t._v("\n-- 启动客户端\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./zkCli.sh")]),t._v("\n\n如果是连接多个不同的主机节点，可以使用如下命令：\n./zkCli.sh -server "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.128:2888\n")])])]),s("h3",{attrs:{id:"启动zookeeper-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动zookeeper-2"}},[t._v("#")]),t._v(" 启动zookeeper")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./zkServer.sh status")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("至此zk安装成功。")])]),t._v(" "),s("h2",{attrs:{id:"kafka的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka的安装"}},[t._v("#")]),t._v(" KafKa的安装")]),t._v(" "),s("p",[t._v("KafKa下载地址:"),s("a",{attrs:{href:"http://kafka.apache.org/downloads.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://kafka.apache.org/downloads.html"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"上传解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传解压"}},[t._v("#")]),t._v(" 上传解压")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("同样我们把kafka安装在/usr/local,解压改名")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("--- rz 上传命令\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rz   ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar -zxvf kafka_2.12-1.0.0.tgz  ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mv kafka_2.12-1.0.0 kafka")]),t._v("\n")])])]),s("h3",{attrs:{id:"配置修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置修改"}},[t._v("#")]),t._v(" 配置修改")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("修改配置文件server.properties 使其可以被远程访问")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local/kafka/config/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vim server.properties")]),t._v("\n\nserver.properties修改部分\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.128为本机的ip,可以通过ifconfig查看\n····\nhost.name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".248.128\n\nlisteners "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PLAINTEXT://192.168.248.128:9092\n\nadvertised.listeners"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PLAINTEXT://192.168.248.128:9092\n····\n")])])]),s("h3",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("ul",[s("li",[t._v("启动之前请保证"),s("code",[t._v("9092")]),t._v("端口开放,对于安装在云服务器上面的还需要去控制平台打开安全组配置。")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("-- 启动命令\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local/kafka/bin")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./kafka-server-start.sh ../config/server.properties")]),t._v("\n\n备注:这种是控制台启动，关闭控制台服务就会关闭，后台启动命令如下\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" ./kafka-server-start.sh "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/config/server.properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),s("h3",{attrs:{id:"测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[t._v("#")]),t._v(" 测试")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./kafka-console-producer.sh --broker-list 192.168.248.128:9092 --topic test7")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/upload/2021/01/image-29c84e761e03470c8a1477d25d81fc39.png",alt:"image.png"}})]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("---重新开一个会话\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  ./kafka-console-consumer.sh --zookeeper 192.168.248.128:2181 --topic test7 --from-beginning")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/upload/2021/01/image-a5dbd11e9d844ed9b38eaa59655fcd85.png",alt:"image.png"}})]),t._v(" "),s("p",[t._v("接收正常")]),t._v(" "),s("p",[t._v("至此安装完毕")]),t._v(" "),s("p",[t._v("----- 世界太大，我们太小")])])}),[],!1,null,null,null);a.default=e.exports}}]);