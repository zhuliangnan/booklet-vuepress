(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{530:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"线程池-业务代码最常用也最容易犯错的组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#线程池-业务代码最常用也最容易犯错的组件"}},[t._v("#")]),t._v(" 线程池：业务代码最常用也最容易犯错的组件")]),t._v(" "),a("p",[t._v("线程的创建和销毁代价比较大，所以我们一般使用线程池来进行控制")]),t._v(" "),a("h3",{attrs:{id:"线程池的声明需要手动进行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#线程池的声明需要手动进行"}},[t._v("#")]),t._v(" 线程池的声明需要手动进行")]),t._v(" "),a("p",[t._v("通过Java 中的 Executors 类我们可以很方便的快速创建线程池，但是"),a("code",[t._v("《阿里巴巴 Java 开发手册》")]),t._v("中提到，禁止使用这些方法来创建线程池，而应该"),a("code",[t._v("手动 new ThreadPoolExecutor 来创建线程池")])]),t._v(" "),a("ul",[a("li",[t._v("方便我们更加直观的评估线程池的各个参数")]),t._v(" "),a("li",[t._v("任何时候，都应该为自定义线程池指定有意义的名称，以方便排查问题")])]),t._v(" "),a("p",[t._v("这一条规则的背后，是大量血淋淋的生产事故，最典型的就是 "),a("code",[t._v("newFixedThreadPool")]),t._v(" 和 "),a("code",[t._v("newCachedThreadPool")]),t._v("，可能因为资源耗尽导致 "),a("code",[t._v("OOM")]),t._v(" 问题。")]),t._v(" "),a("p",[t._v("我们写一段测试代码，来初始化一个单线程的 "),a("code",[t._v("FixedThreadPool")]),t._v("，循环 1 亿次向线程池提交任务，每个任务都会"),a("code",[t._v("创建")]),t._v("一个比较大的字符串"),a("code",[t._v("然后")]),t._v("休眠一小时`：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Slf4j")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FixedThreadPoolController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Executors.newSingleThreadScheduledExecutor()实现定时任务\n     * 1表示时间单位的数值 TimeUnit.SECONDS  延时单位为秒\n     * */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStats")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newSingleThreadScheduledExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scheduleAtFixedRate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"========================="')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Pool Size: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPoolSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Active Threads: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getActiveCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Number of Tasks Completed: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCompletedTaskCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Number of Tasks in Queue: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"========================="')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oom1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("oom1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" threadPool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFixedThreadPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//打印线程池的信息，稍后我会解释这段代码")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStats")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" payload "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rangeClosed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapToObj")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collectors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("joining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" UUID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomUUID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HOURS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awaitTermination")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HOURS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"/java-guide/image-20211207151000440.png",alt:"image-20211207151000440"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/java-guide/image-20211207151515635.png",alt:"image-20211207151515635"}})]),t._v(" "),a("p",[t._v("执行程序后不久,随着队列任务的急剧上升,"),a("code",[t._v("jvisualvm.exe")]),t._v("中也能看到使用内存在缓步上升，日志中就出现了如下 OOM(ps:如果你的机器内存比较大，可能要等一会)：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Exception "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" thread "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http-nio-45678-ClientPoller"')]),t._v(" java.lang.OutOfMemoryError: GC overhead limit exceeded\n")])])]),a("blockquote",[a("p",[t._v("翻看 "),a("code",[t._v("newFixedThreadPool")]),t._v(" 方法的源码不难发现，线程池的工作队列直接 new 了一个 "),a("code",[t._v("LinkedBlockingQueue")]),t._v("，而默认构造方法的 "),a("code",[t._v("LinkedBlockingQueue 是一个 Integer.MAX_VALUE 长度的队列")]),t._v("，可以认为是"),a("code",[t._v("无界")]),t._v("的,源码如下：")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutorService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFixedThreadPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" nThreads"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nThreads"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nThreads"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0L")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MILLISECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedBlockingQueue")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedBlockingQueue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MAX_VALUE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("我们再把刚才的例子稍微改一下，改为使用 "),a("code",[t._v("newCachedThreadPool")]),t._v(" 方法来获得线程池。程序运行不久后（你的cpu会飙满），同样看到了如下 OOM 异常：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/java-guide/image-20211208112143167.png",alt:"image-20211208112143167"}})]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(":30:30.487"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("http-nio-45678-exec-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(".a.c.c.C."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("dispatcherServlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":175 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" - Servlet.service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" servlet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("dispatcherServlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" context with path "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" threw exception "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Handler dispatch failed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" nested exception is java.lang.OutOfMemoryError: unable to create new native thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" with root cause\njava.lang.OutOfMemoryError: unable to create new native thread \n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("翻看 "),a("code",[t._v("newCachedThreadPool")]),t._v(" 的源码可以看到，这种线程池的最大线程数是 "),a("code",[t._v("Integer.MAX_VALUE")]),t._v("，可以认为是没有上限的，而其"),a("code",[t._v("工作队列 SynchronousQueue")]),t._v(" 是一个"),a("code",[t._v("没有存储空间的阻塞队列")]),t._v("。这意味着，只要有请求到来，就必须找到一条工作线程来处理，如果当前"),a("code",[t._v("没有空闲的线程就再创建一条新的")]),t._v("。所以无限制创建下去必然OOM")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutorService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newCachedThreadPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MAX_VALUE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60L")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SynchronousQueue")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"线程池线程管理策略详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#线程池线程管理策略详解"}},[t._v("#")]),t._v(" 线程池线程管理策略详解")]),t._v(" "),a("p",[t._v("ps1.参数解释")]),t._v(" "),a("p",[a("img",{attrs:{src:"/java-guide/image-20211208132219348.png",alt:"image-20211208132219348"}})]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("corePoolSize：")]),t._v(" 线程池核心线程数最大值")]),t._v(" "),a("li",[a("strong",[t._v("maximumPoolSize：")]),t._v(" 线程池最大线程数大小")]),t._v(" "),a("li",[a("strong",[t._v("keepAliveTime：")]),t._v(" 线程池中非核心线程空闲的存活时间大小")]),t._v(" "),a("li",[a("strong",[t._v("unit：")]),t._v(" 线程空闲存活时间单位")]),t._v(" "),a("li",[a("strong",[t._v("workQueue：")]),t._v(" 存放任务的阻塞队列")]),t._v(" "),a("li",[a("strong",[t._v("threadFactory：")]),t._v(" 用于设置创建线程的工厂，可以给创建的线程设置有意义的名字，可方便排查问题")]),t._v(" "),a("li",[a("strong",[t._v("handler：")]),t._v(" 线城池的饱和策略事件，主要有四种类型。")])]),t._v(" "),a("p",[t._v("ps2:线程池拒接策略")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("AbortPolicy")]),t._v("：丢弃任务并抛出RejectedExecutionException异常")]),t._v(" "),a("li",[a("strong",[t._v("DiscardPolicy")]),t._v("：丢弃任务，但是不抛出异常。")]),t._v(" "),a("li",[a("strong",[t._v("DisCardOldSetPolicy")]),t._v("：丢弃队列最前面的任务，然后提交新来的任务")]),t._v(" "),a("li",[a("strong",[t._v("CallerRunPolicy")]),t._v("：由调用线程（提交任务的线程，主线程）处理该任务")])]),t._v(" "),a("p",[t._v("ps3: 使用Jodd记得引入包")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- https://mvnrepository.com/artifact/org.jodd/jodd-core --\x3e")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.jodd"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("jodd-core"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("5.0.13"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("首先，自定义一个线程池。这个线程池具有"),a("code",[t._v("2 个核心线程")]),t._v("、"),a("code",[t._v("5 个最大线程")]),t._v("、使用"),a("code",[t._v("容量为 10 的 ArrayBlockingQueue 阻塞队列")]),t._v("作为工作队列，使用默认的 "),a("code",[t._v("AbortPolicy 拒绝策略")]),t._v("，也就是任务添加到线程池失败会抛出 "),a("code",[t._v("RejectedExecutionException")]),t._v("。此外，我们借助了 "),a("code",[t._v("Jodd")]),t._v(" 类库的 "),a("code",[t._v("ThreadFactoryBuilder")]),t._v(" 方法来构造一个线程工厂，实现线程池线程的自定义命名。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 初始化AtomicInteger\n     * 循环20次每次+1的同时开启一个线程执行10s然后输出线程开始和结束的AtomicInteger的值\n     * */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/03/01/right"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("right")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AtomicInteger")]),t._v(" atomicInteger "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AtomicInteger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" threadPool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBlockingQueue")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadFactoryBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNameFormat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo-threadpool-%d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AbortPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//threadPool.allowCoreThreadTimeOut(true);")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStats")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rangeClosed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// AtomicInteger的CAS进行新增")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" atomicInteger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("incrementAndGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{} started"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{} finished"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" ex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error submitting task {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                atomicInteger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrementAndGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" atomicInteger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("intValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 场景1 当核心线程满了之后不会立即扩容线程池，而是把任务堆积到工作队列中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:49.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:50.655  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:50.656  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:50.656  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:50.657  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:50.657  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:50.657  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:51.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:51.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:51.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:51.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:51.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:51.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:52.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:52.655  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:52.658  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:52.658  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:52.659  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:52.662  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:53.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 场景2 当工作队列满了后扩容线程池，一直到线程个数达到 maximumPoolSize 为止，如果队列已满且达到了最大线程后还有任务进来，按照拒绝策略处理；")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":42:59.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:00.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:00.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:00.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:00.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:00.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:00.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:01.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:01.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:01.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:01.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:01.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:01.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:01.663  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mo-threadpool-2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" started\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:02.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:02.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:02.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:02.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:02.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:02.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:02.664  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mo-threadpool-3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" started\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:03.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:03.655  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:03.655  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:03.656  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:03.657  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:03.657  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:03.665  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mo-threadpool-4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" started\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:04.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:04.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:04.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:04.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:04.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:04.652  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:04.680 ERROR "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nio-8080-exec-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" error submitting task "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@441aaaee rejected from java.util.concurrent.ThreadPoolExecutor@7e78c9fa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Running, pool size "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(", active threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(", queued tasks "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(", completed tasks "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\tat java.util.concurrent.ThreadPoolExecutor"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$AbortPolicy")]),t._v(".rejectedExecution"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThreadPoolExecutor.java:2063"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("na:1.8.0_251"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\tat java.util.concurrent.ThreadPoolExecutor.reject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThreadPoolExecutor.java:830"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("na:1.8.0_251"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\tat java.util.concurrent.ThreadPoolExecutor.execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThreadPoolExecutor.java:1379"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("na:1.8.0_251"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\tat java.util.concurrent.AbstractExecutorService.submit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AbstractExecutorService.java:112"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("na:1.8.0_251"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\tat com.zln.javaguide.demo1.controller.FixedThreadPoolController.lambda"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$right")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("FixedThreadPoolController.java:110"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("classes/:na"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 场景3 当线程数大于核心线程数时，线程等待 keepAliveTime 后还是没有任务需要处理的话，收缩线程到核心线程数。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:34.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:35.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:35.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:35.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:35.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:35.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:35.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:36.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:36.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:36.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:36.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:36.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:36.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:37.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:37.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:37.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:37.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:37.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:37.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:38.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:38.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:38.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:38.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:38.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:38.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:39.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:39.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:39.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:39.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:39.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:39.653  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":43:40.654  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512224")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-2-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.FixedThreadPoolController      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n\n")])])]),a("p",[t._v("至此，我们可以总结出线程池默认的工作行为：")]),t._v(" "),a("ul",[a("li",[t._v("不会初始化 "),a("code",[t._v("corePoolSize")]),t._v(" 个线程，有任务来了才创建工作线程；")]),t._v(" "),a("li",[t._v("当"),a("code",[t._v("核心线程满")]),t._v("了之后"),a("code",[t._v("不会立即扩容线程池")]),t._v("，而是把任务"),a("code",[t._v("堆积")]),t._v("到"),a("code",[t._v("工作队列")]),t._v("中；")]),t._v(" "),a("li",[t._v("当工作"),a("code",[t._v("队列满了")]),t._v("后"),a("code",[t._v("扩容线程池")]),t._v("，一直到线程个数达到"),a("code",[t._v("maximumPoolSize")]),t._v("为止；")]),t._v(" "),a("li",[t._v("如果队列已满且达到了最大线程后还有任务进来，按照拒绝策略处理；")]),t._v(" "),a("li",[t._v("当"),a("code",[t._v("线程数大于核心线程数")]),t._v("时，线程等待 "),a("code",[t._v("keepAliveTime")]),t._v(" 后还是没有任务需要处理的话，"),a("code",[t._v("收缩")]),t._v("线程到"),a("code",[t._v("核心线程数")]),t._v("。")])]),t._v(" "),a("p",[t._v("当然可以使用其他方法来打破这些约束")]),t._v(" "),a("ul",[a("li",[t._v("声明线程池后立即调用 "),a("code",[t._v("prestartAllCoreThreads")]),t._v(" 方法，来"),a("code",[t._v("启动所有核心线程")]),t._v("；")]),t._v(" "),a("li",[t._v("传入 "),a("code",[t._v("true")]),t._v(" 给 "),a("code",[t._v("allowCoreThreadTimeOut")]),t._v(" 方法，来让线程池在"),a("code",[t._v("空闲的时候")]),t._v("同样"),a("code",[t._v("回收核心线程")]),t._v("。")])]),t._v(" "),a("h3",{attrs:{id:"务必确认清楚线程池本身是不是复用的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#务必确认清楚线程池本身是不是复用的"}},[t._v("#")]),t._v(" 务必确认清楚线程池本身是不是复用的")]),t._v(" "),a("p",[t._v("下面我们来模拟一个没有正确复用线程池导致线程数暴涨的栗子。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/03/02/wrong"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" threadPool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolHelper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThreadPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rangeClosed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" payload "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rangeClosed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapToObj")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collectors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("joining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" UUID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomUUID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolHelper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThreadPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newCachedThreadPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"/java-guide/image-20211208141309754.png",alt:"image-20211208141309754"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/java-guide/image-20211208141415947.png",alt:"image-20211208141415947"}})]),t._v(" "),a("p",[t._v("问题很容易发现getThreadPool 方法居然是每次都使用 Executors.newCachedThreadPool 来创建一个线程池。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("我们可以想到 newCachedThreadPool 会在需要时创建必要多的线程，业务代码的一次业务操作会向线程池提交多个慢任务，这样执行一次业务操作就会开启多个线程。如果业务操作并发量较大的话，的确有可能一下子开启几千个线程。")]),t._v(" "),a("p",[t._v("但是你会发现线程数一段时间后会下降，翻看newCachedThreadPool 的定义就会发现，它的核心线程数是 0，而 keepAliveTime 是 60 秒，也就是在 60 秒之后所有的线程都是可以回收的。好吧，就因为这个特性，我们的业务程序死得没太难看。")])]),t._v(" "),a("p",[t._v("要修复这个 Bug 也很简单，使用一个静态字段来存放线程池的引用，返回线程池的代码直接返回这个静态字段即可")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolHelper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" threadPoolExecutor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBlockingQueue")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadFactoryBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNameFormat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo-threadpool-%d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRightThreadPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" threadPoolExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"需要仔细斟酌线程池的混用策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要仔细斟酌线程池的混用策略"}},[t._v("#")]),t._v(" 需要仔细斟酌线程池的混用策略")]),t._v(" "),a("p",[t._v("要根据任务的“轻重缓急”来指定线程池的核心参数，包括线程数、回收策略和任务队列,而不是看见业务中已经有线程池就拿来混用：")]),t._v(" "),a("ul",[a("li",[t._v("对于执行比较慢、数量不大的 IO 任务，或许要考虑更多的线程数，而不需要太大的队列。(线程在处理 I/O 的时间段内不会占用 CPU 来处理，这时就可以将 CPU 交出给其它线程使用。所以对于IO任务可以多分配写线程。)")]),t._v(" "),a("li",[t._v("而对于吞吐量较大的计算型任务，线程数量不宜过多，可以是 CPU 核数或核数 *2（理由是，线程一定调度到某个 CPU 进行执行，如果任务本身是 CPU 绑定的任务，那么"),a("code",[t._v("过多的线程")]),t._v("只会"),a("code",[t._v("增加线程切换的开销")]),t._v("，"),a("code",[t._v("并不能提升吞吐量")]),t._v("），但可能"),a("code",[t._v("需要较长的队列来做缓冲")]),t._v("。")])]),t._v(" "),a("p",[t._v("这里，我们模拟一下文件批处理的代码，在程序启动后通过一个线程开启死循环逻辑，不断向线程池提交任务，任务的逻辑是向一个文件中写入大量的数据：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" threadPool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HOURS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBlockingQueue")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadFactoryBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNameFormat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"batchfileprocess-threadpool-%d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CallerRunsPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStats")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" payload "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rangeClosed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1_000_000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapToObj")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collectors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("joining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collections")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("singletonList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocalTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" UTF_8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CREATE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TRUNCATE_EXISTING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"batch file processing done"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.848  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("       Thread-5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" batch "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" processing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.848  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ss-threadpool-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" batch "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" processing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.851  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-3-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.851  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-3-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Pool Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.851  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-3-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Active Threads: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.851  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-3-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks Completed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2375")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.851  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-3-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Number of Tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Queue: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.851  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pool-3-thread-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.859  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ss-threadpool-0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" batch "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" processing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.859  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("       Thread-5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" batch "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" processing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("-12-08 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":29:34.860  INFO "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("39440")]),t._v(" --- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ss-threadpool-1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" c.z.j.d.c.ThreadPoolMixuseController     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" batch "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" processing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("可以看到，线程池的 2 个线程始终处于活跃状态，队列也基本处于打满状态,因为开启了 CallerRunsPolicy 拒绝处理策略，所以当线程满载队列也满的情况下，任务会在提交任务的线程，或者说调用 execute 方法的线程执行，也就是说不能认为提交到线程池的任务就一定是异步处理的。如果使用了 CallerRunsPolicy 策略，那么有可能异步任务变为同步执行。")])]),t._v(" "),a("p",[t._v("业务代码复用这样的线程池来做内存计算，命运一定是悲惨的。我们写一段代码测试下，向线程池提交一个简单的任务，这个任务只是休眠 10 毫秒没有其他逻辑：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" threadPool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HOURS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBlockingQueue")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadFactoryBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNameFormat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"batchfileprocess-threadpool-%d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CallerRunsPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Callable")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("calcTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MILLISECONDS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/03/03/wrong"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrong")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" threadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("calcTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("wrk")]),t._v(" 工具(http压测工具，目前仅仅支持mac和linux，win可以安装"),a("code",[t._v("ab")]),t._v("进行压测,这里我使用的是windows因此使用"),a("code",[t._v("ab")]),t._v("进行压测)对这个接口进行一个简单的压测，可以看到 TPS(QPS) 为 150.78，性能的确非常差。")]),t._v(" "),a("p",[t._v("备注：如果是对一个查询接口（单场景）压测，且这个接口内部不会再去请求其它接口，那么tps=qps，否则，tps≠qps")]),t._v(" "),a("p",[a("img",{attrs:{src:"/java-guide/image-20211208152932113.png",alt:"image-20211208152932113"}})]),t._v(" "),a("p",[t._v("其中－n表示请求数，－c表示并发数")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("服务器一秒内能接受客户端访问的数量")])]),t._v(" "),a("li",[a("p",[t._v("处理一个请求所需的时间")])]),t._v(" "),a("li",[a("p",[t._v("平均多久处理下一个请求")])]),t._v(" "),a("li",[a("p",[t._v("请求在单位时间内从服务器获取的数据长度")])])]),t._v(" "),a("p",[t._v("原因：因为原来执行 IO 任务的线程池使用的是 CallerRunsPolicy 策略，所以直接使用这个线程池进行异步计算的话，当线程池饱和的时候，计算任务会在执行 Web 请求的 Tomcat 线程执行，这时就会进一步影响到其他同步处理的线程，甚至造成整个应用程序崩溃。所以CallerRunsPolicy 策略慎用")]),t._v(" "),a("p",[t._v("接下来我们使用默认的拒绝策略，并且提高线程数")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" asyncCalcThreadPool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HOURS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBlockingQueue")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadFactoryBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNameFormat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"asynccalc-threadpool-%d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"right"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("right")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" asyncCalcThreadPool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("calcTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"/java-guide/image-20211208153544125.png",alt:"image-20211208153544125"}})]),t._v(" "),a("p",[t._v("盲目复用线程池混用线程的问题在于，别人定义的线程池属性"),a("code",[t._v("不一定适合你的任务")]),t._v("，而且混用会相互干扰.")])])}),[],!1,null,null,null);s.default=e.exports}}]);